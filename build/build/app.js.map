{"version":3,"sources":["node_modules/browser-pack/_prelude.js","js/app.js","js/parallax.js"],"names":[],"mappings":"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","file":"../app.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","//var React = require('react');\n//var IScroll = require('IScroll');\nvar parallax = require('./parallax.js');\n\nfunction ready(fn) {\n  if (document.readyState != 'loading') {\n    fn();\n  } else {\n    document.addEventListener('DOMContentLoaded', fn);\n  }\n}\n\nready(function() {\n  parallax.init(document.querySelectorAll('.parallax'));\n});\n","var parallax = (function() {\n\n  var window_width;\n\n  var getWindowSize = function() {\n    var w = window,\n      d = document,\n      e = d.documentElement,\n      g = d.getElementsByTagName('body')[0];\n\n    return {\n      width: w.innerWidth || e.clientWidth || g.clientWidth,\n      height: w.innerHeight || e.clientHeight || g.clientHeight\n    };\n  }\n\n  var offset = function(elt) {\n    var rect = elt.getBoundingClientRect(),\n      bodyElt = document.body;\n\n    return {\n      top: rect.top + bodyElt .scrollTop,\n      left: rect.left + bodyElt .scrollLeft\n    };\n  }\n\n  var getHeight = function(elem) {\n    return Math.max(elem.offsetHeight, elem.clientHeight);\n  }\n\n  var attachEvents = function(item) {\n    window.addEventListener('scroll', function() {\n      window_width = getWindowSize.width;\n      updateParallax(item, false);\n    });\n\n    window.addEventListener('resize', function() {\n      window_width = getWindowSize.width;\n      updateParallax(item, false);\n    });\n  }\n\n  var updateParallax = function(item, initial) {\n    var container_height;\n    var image = item.querySelector('img');\n    if (window_width < 992) {\n      container_height = (getHeight(item) > 0) ? getHeight(item) : getHeight(image);\n    } else {\n      container_height = (getHeight(item) > 0) ? getHeight(item) : 500;\n    }\n    var img_height = getHeight(image);\n    var parallax_dist = img_height - container_height;\n    var bottom = offset(item).top + container_height;\n    var top = offset(item).top;\n    var scrollTop = window.pageYOffset;\n    var windowHeight = window.innerHeight;\n    var windowBottom = scrollTop + windowHeight;\n    var percentScrolled = (windowBottom - top) / (container_height + windowHeight);\n    var parallax = (-1 * parallax_dist * percentScrolled) + container_height;\n\n    if ((bottom > scrollTop) && (top < (scrollTop + windowHeight))) {\n      image.style.transform = \"translate3d(0,\" + parallax + \"px,0)\";\n      image.style.webkitTransform = \"translate3d(0,\" + parallax + \"px,0)\";\n      image.style.MozTransform = \"translate3d(0,\" + parallax + \"px,0)\";\n      image.style.MozTransform = \"translate3d(0,\" + parallax + \"px,0)\";\n      image.style.msTransform = \"translate3d(0,\" + parallax + \"px,0)\";\n      image.style.OTransform = \"translate3d(0,\" + parallax + \"px,0)\";\n    }\n    if (initial) {\n      image.style.display = \"block\";\n    }\n  }\n\n  return {\n    init: function(items) {\n      window_width = getWindowSize.width\n      Array.prototype.forEach.call(items, function(item, i) {\n        item.classList.add('parallax');\n\n        Array.prototype.forEach.call(item.querySelectorAll('img'), function(img, i) {\n          img.style.backgroundImage = 'url(' + img.src + ')';\n          img.src = 'data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==';\n        });\n\n        // Wait for image load\n        Array.prototype.forEach.call(item.querySelectorAll('img'), function(img, i) {\n          img.addEventListener('load', function() {\n            updateParallax(item, true);\n          });\n          if (img.complete) {\n            img.dispatchEvent(new Event('load'));\n          }\n        });\n\n        attachEvents(item);\n      });\n    }\n  };\n}());\n\n(function(root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    // AMD. Register as an anonymous module.\n    define([], factory);\n  } else if (typeof exports === 'object') {\n    // Node. Does not work with strict CommonJS, but\n    // only CommonJS-like environments that support module.exports,\n    // like Node.\n    module.exports = factory();\n  } else {\n    // Browser globals (root is window)\n    root.returnExports = factory();\n  }\n}(this, function() {\n  return parallax;\n}));\n\nif (window.$) {\n  (function($) {\n    $.fn.parallax = function() {\n      parallax.init(this);\n\n      return this;\n    };\n  }(jQuery));\n}\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCIvVXNlcnMvY2F6aWVsL3dvcmtzcGFjZS9vd24vZGlnaXRhbGthb3ouZ2l0aHViLmlvL2pzL2FwcC5qcyIsIi9Vc2Vycy9jYXppZWwvd29ya3NwYWNlL293bi9kaWdpdGFsa2Fvei5naXRodWIuaW8vanMvcGFyYWxsYXguanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQSwrQkFBK0I7QUFDL0IsbUNBQW1DO0FBQ25DLElBQUksUUFBUSxHQUFHLE9BQU8sQ0FBQyxlQUFlLENBQUMsQ0FBQzs7QUFFeEMsU0FBUyxLQUFLLENBQUMsRUFBRSxFQUFFO0VBQ2pCLElBQUksUUFBUSxDQUFDLFVBQVUsSUFBSSxTQUFTLEVBQUU7SUFDcEMsRUFBRSxFQUFFLENBQUM7R0FDTixNQUFNO0lBQ0wsUUFBUSxDQUFDLGdCQUFnQixDQUFDLGtCQUFrQixFQUFFLEVBQUUsQ0FBQyxDQUFDO0dBQ25EO0FBQ0gsQ0FBQzs7QUFFRCxLQUFLLENBQUMsV0FBVztFQUNmLFFBQVEsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLGdCQUFnQixDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUM7Q0FDdkQsQ0FBQyxDQUFDOzs7QUNkSCxJQUFJLFFBQVEsSUFBSSxXQUFXOztBQUUzQixFQUFFLElBQUksWUFBWSxDQUFDOztFQUVqQixJQUFJLGFBQWEsR0FBRyxXQUFXO0lBQzdCLElBQUksQ0FBQyxHQUFHLE1BQU07TUFDWixDQUFDLEdBQUcsUUFBUTtNQUNaLENBQUMsR0FBRyxDQUFDLENBQUMsZUFBZTtBQUMzQixNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsb0JBQW9CLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7O0lBRXhDLE9BQU87TUFDTCxLQUFLLEVBQUUsQ0FBQyxDQUFDLFVBQVUsSUFBSSxDQUFDLENBQUMsV0FBVyxJQUFJLENBQUMsQ0FBQyxXQUFXO01BQ3JELE1BQU0sRUFBRSxD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SSxDQUFDO0tBQ2IsQ0FBQztHQUNILENBQUMsTUFBTSxDQUFDLEVBQUU7Q0FDWiIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCIvL3ZhciBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG4vL3ZhciBJU2Nyb2xsID0gcmVxdWlyZSgnSVNjcm9sbCcpO1xudmFyIHBhcmFsbGF4ID0gcmVxdWlyZSgnLi9wYXJhbGxheC5qcycpO1xuXG5mdW5jdGlvbiByZWFkeShmbikge1xuICBpZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSAhPSAnbG9hZGluZycpIHtcbiAgICBmbigpO1xuICB9IGVsc2Uge1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmbik7XG4gIH1cbn1cblxucmVhZHkoZnVuY3Rpb24oKSB7XG4gIHBhcmFsbGF4LmluaXQoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnBhcmFsbGF4JykpO1xufSk7XG4iLCJ2YXIgcGFyYWxsYXggPSAoZnVuY3Rpb24oKSB7XG5cbiAgdmFyIHdpbmRvd193aWR0aDtcblxuICB2YXIgZ2V0V2luZG93U2l6ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciB3ID0gd2luZG93LFxuICAgICAgZCA9IGRvY3VtZW50LFxuICAgICAgZSA9IGQuZG9jdW1lbnRFbGVtZW50LFxuICAgICAgZyA9IGQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2JvZHknKVswXTtcblxuICAgIHJldHVybiB7XG4gICAgICB3aWR0aDogdy5pbm5lcldpZHRoIHx8IGUuY2xpZW50V2lkdGggfHwgZy5jbGllbnRXaWR0aCxcbiAgICAgIGhlaWdodDogdy5pbm5lckhlaWdodCB8fCBlLmNsaWVudEhlaWdodCB8fCBnLmNsaWVudEhlaWdodFxuICAgIH07XG4gIH1cblxuICB2YXIgb2Zmc2V0ID0gZnVuY3Rpb24oZWx0KSB7XG4gICAgdmFyIHJlY3QgPSBlbHQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksXG4gICAgICBib2R5RWx0ID0gZG9jdW1lbnQuYm9keTtcblxuICAgIHJldHVybiB7XG4gICAgICB0b3A6IHJlY3QudG9wICsgYm9keUVsdCAuc2Nyb2xsVG9wLFxuICAgICAgbGVmdDogcmVjdC5sZWZ0ICsgYm9keUVsdCAuc2Nyb2xsTGVmdFxuICAgIH07XG4gIH1cblxuICB2YXIgZ2V0SGVpZ2h0ID0gZnVuY3Rpb24oZWxlbSkge1xuICAgIHJldHVybiBNYXRoLm1heChlbGVtLm9mZnNldEhlaWdodCwgZWxlbS5jbGllbnRIZWlnaHQpO1xuICB9XG5cbiAgdmFyIGF0dGFjaEV2ZW50cyA9IGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgZnVuY3Rpb24oKSB7XG4gICAgICB3aW5kb3dfd2lkdGggPSBnZXRXaW5kb3dTaXplLndpZHRoO1xuICAgICAgdXBkYXRlUGFyYWxsYXgoaXRlbSwgZmFsc2UpO1xuICAgIH0pO1xuXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIGZ1bmN0aW9uKCkge1xuICAgICAgd2luZG93X3dpZHRoID0gZ2V0V2luZG93U2l6ZS53aWR0aDtcbiAgICAgIHVwZGF0ZVBhcmFsbGF4KGl0ZW0sIGZhbHNlKTtcbiAgICB9KTtcbiAgfVxuXG4gIHZhciB1cGRhdGVQYXJhbGxheCA9IGZ1bmN0aW9uKGl0ZW0sIGluaXRpYWwpIHtcbiAgICB2YXIgY29udGFpbmVyX2hlaWdodDtcbiAgICB2YXIgaW1hZ2UgPSBpdGVtLnF1ZXJ5U2VsZWN0b3IoJ2ltZycpO1xuICAgIGlmICh3aW5kb3dfd2lkdGggPCA5OTIpIHtcbiAgICAgIGNvbnRhaW5lcl9oZWlnaHQgPSAoZ2V0SGVpZ2h0KGl0ZW0pID4gMCkgPyBnZXRIZWlnaHQoaXRlbSkgOiBnZXRIZWlnaHQoaW1hZ2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb250YWluZXJfaGVpZ2h0ID0gKGdldEhlaWdodChpdGVtKSA+IDApID8gZ2V0SGVpZ2h0KGl0ZW0pIDogNTAwO1xuICAgIH1cbiAgICB2YXIgaW1nX2hlaWdodCA9IGdldEhlaWdodChpbWFnZSk7XG4gICAgdmFyIHBhcmFsbGF4X2Rpc3QgPSBpbWdfaGVpZ2h0IC0gY29udGFpbmVyX2hlaWdodDtcbiAgICB2YXIgYm90dG9tID0gb2Zmc2V0KGl0ZW0pLnRvcCArIGNvbnRhaW5lcl9oZWlnaHQ7XG4gICAgdmFyIHRvcCA9IG9mZnNldChpdGVtKS50b3A7XG4gICAgdmFyIHNjcm9sbFRvcCA9IHdpbmRvdy5wYWdlWU9mZnNldDtcbiAgICB2YXIgd2luZG93SGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xuICAgIHZhciB3aW5kb3dCb3R0b20gPSBzY3JvbGxUb3AgKyB3aW5kb3dIZWlnaHQ7XG4gICAgdmFyIHBlcmNlbnRTY3JvbGxlZCA9ICh3aW5kb3dCb3R0b20gLSB0b3ApIC8gKGNvbnRhaW5lcl9oZWlnaHQgKyB3aW5kb3dIZWlnaHQpO1xuICAgIHZhciBwYXJhbGxheCA9ICgtMSAqIHBhcmFsbGF4X2Rpc3QgKiBwZXJjZW50U2Nyb2xsZWQpICsgY29udGFpbmVyX2hlaWdodDtcblxuICAgIGlmICgoYm90dG9tID4gc2Nyb2xsVG9wKSAmJiAodG9wIDwgKHNjcm9sbFRvcCArIHdpbmRvd0hlaWdodCkpKSB7XG4gICAgICBpbWFnZS5zdHlsZS50cmFuc2Zvcm0gPSBcInRyYW5zbGF0ZTNkKDAsXCIgKyBwYXJhbGxheCArIFwicHgsMClcIjtcbiAgICAgIGltYWdlLnN0eWxlLndlYmtpdFRyYW5zZm9ybSA9IFwidHJhbnNsYXRlM2QoMCxcIiArIHBhcmFsbGF4ICsgXCJweCwwKVwiO1xuICAgICAgaW1hZ2Uuc3R5bGUuTW96VHJhbnNmb3JtID0gXCJ0cmFuc2xhdGUzZCgwLFwiICsgcGFyYWxsYXggKyBcInB4LDApXCI7XG4gICAgICBpbWFnZS5zdHlsZS5Nb3pUcmFuc2Zvcm0gPSBcInRyYW5zbGF0ZTNkKDAsXCIgKyBwYXJhbGxheCArIFwicHgsMClcIjtcbiAgICAgIGltYWdlLnN0eWxlLm1zVHJhbnNmb3JtID0gXCJ0cmFuc2xhdGUzZCgwLFwiICsgcGFyYWxsYXggKyBcInB4LDApXCI7XG4gICAgICBpbWFnZS5zdHlsZS5PVHJhbnNmb3JtID0gXCJ0cmFuc2xhdGUzZCgwLFwiICsgcGFyYWxsYXggKyBcInB4LDApXCI7XG4gICAgfVxuICAgIGlmIChpbml0aWFsKSB7XG4gICAgICBpbWFnZS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7XG4gICAgaW5pdDogZnVuY3Rpb24oaXRlbXMpIHtcbiAgICAgIHdpbmRvd193aWR0aCA9IGdldFdpbmRvd1NpemUud2lkdGhcbiAgICAgIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoaXRlbXMsIGZ1bmN0aW9uKGl0ZW0sIGkpIHtcbiAgICAgICAgaXRlbS5jbGFzc0xpc3QuYWRkKCdwYXJhbGxheCcpO1xuXG4gICAgICAgIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoaXRlbS5xdWVyeVNlbGVjdG9yQWxsKCdpbWcnKSwgZnVuY3Rpb24oaW1nLCBpKSB7XG4gICAgICAgICAgaW1nLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9ICd1cmwoJyArIGltZy5zcmMgKyAnKSc7XG4gICAgICAgICAgaW1nLnNyYyA9ICdkYXRhOmltYWdlL2dpZjtiYXNlNjQsUjBsR09EbGhBUUFCQUlBQkFQLy8vd0FBQUNINUJBRUtBQUVBTEFBQUFBQUJBQUVBQUFJQ1RBRUFPdz09JztcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gV2FpdCBmb3IgaW1hZ2UgbG9hZFxuICAgICAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGl0ZW0ucXVlcnlTZWxlY3RvckFsbCgnaW1nJyksIGZ1bmN0aW9uKGltZywgaSkge1xuICAgICAgICAgIGltZy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB1cGRhdGVQYXJhbGxheChpdGVtLCB0cnVlKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBpZiAoaW1nLmNvbXBsZXRlKSB7XG4gICAgICAgICAgICBpbWcuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoJ2xvYWQnKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBhdHRhY2hFdmVudHMoaXRlbSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG59KCkpO1xuXG4oZnVuY3Rpb24ocm9vdCwgZmFjdG9yeSkge1xuICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgLy8gQU1ELiBSZWdpc3RlciBhcyBhbiBhbm9ueW1vdXMgbW9kdWxlLlxuICAgIGRlZmluZShbXSwgZmFjdG9yeSk7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKSB7XG4gICAgLy8gTm9kZS4gRG9lcyBub3Qgd29yayB3aXRoIHN0cmljdCBDb21tb25KUywgYnV0XG4gICAgLy8gb25seSBDb21tb25KUy1saWtlIGVudmlyb25tZW50cyB0aGF0IHN1cHBvcnQgbW9kdWxlLmV4cG9ydHMsXG4gICAgLy8gbGlrZSBOb2RlLlxuICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuICB9IGVsc2Uge1xuICAgIC8vIEJyb3dzZXIgZ2xvYmFscyAocm9vdCBpcyB3aW5kb3cpXG4gICAgcm9vdC5yZXR1cm5FeHBvcnRzID0gZmFjdG9yeSgpO1xuICB9XG59KHRoaXMsIGZ1bmN0aW9uKCkge1xuICByZXR1cm4gcGFyYWxsYXg7XG59KSk7XG5cbmlmICh3aW5kb3cuJCkge1xuICAoZnVuY3Rpb24oJCkge1xuICAgICQuZm4ucGFyYWxsYXggPSBmdW5jdGlvbigpIHtcbiAgICAgIHBhcmFsbGF4LmluaXQodGhpcyk7XG5cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gIH0oalF1ZXJ5KSk7XG59XG4iXX0="}